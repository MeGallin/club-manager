"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[377],{9377:function(e,s,n){n.r(s),n.d(s,{default:function(){return k}});var t=n(2791),r=n(885),i=n(7689),l=n(1087),a=n(9434),o=n(9135),d=n(8587),u=n(9183),c=n(5386),v=n(1141),m=n(9375),g=n(5223),x=n(2426),h=n.n(x),j=n(4345),p=n(2986),f=n(184),Z=function(e){var s=e.messageId,n=(0,a.I0)(),t=(0,a.v9)((function(e){return e.adminDeletePrivateMessage})),r=t.loading,i=t.success,l=t.error;return(0,f.jsxs)(f.Fragment,{children:[l?(0,f.jsx)(u.Z,{error:l}):null,i?(0,f.jsx)(p.Z,{message:"Message was successfully deleted"}):null,r?(0,f.jsx)(c.Z,{}):(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(j.Z,{className:"create-btn",openButtonTitle:"Delete Message",closeButtonTitle:"No thanks",variant:"danger",props:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{children:(0,f.jsx)("h3",{children:"By deleting this you are removing all records of correspondence between you and the this user. Are you sure?"})}),(0,f.jsx)(v.Z,{type:"submit",text:"Yes, Delete Message",variant:"danger",disabled:!1,onClick:function(){s&&n((0,d.eH)(s))}})]})})})]})},N=n(4942),b=n(1413),w=n(7388),y=n(4419),C=n(8989),M=function(e){var s=e.messageId,n=(0,a.I0)(),i=(0,a.v9)((function(e){return e.adminGetPrivateMessages})).messages,l=null===i||void 0===i?void 0:i.filter((function(e){return(null===e||void 0===e?void 0:e._id)===s&&e})),o=(0,t.useState)({title:l[0].title,message:l[0].message,from:l[0].from}),m=(0,r.Z)(o,2),g=m[0],x=m[1],h=g.title,j=g.message,Z=g.from,M=function(e){x((function(s){return(0,b.Z)((0,b.Z)({},s),{},(0,N.Z)({},e.name,e.value))}))},D=(0,a.v9)((function(e){return e.adminEditPrivateMessage})),k=D.loading,I=D.error,A=D.success;return(0,f.jsxs)(f.Fragment,{children:[I?(0,f.jsx)(u.Z,{error:I}):null,A?(0,f.jsx)(p.Z,{message:"Message was successfully updated."}):null,k?(0,f.jsx)(c.Z,{}):(0,f.jsxs)("fieldset",{className:"fieldSet",children:[(0,f.jsx)("legend",{children:"Edit Private message"}),(0,f.jsx)("div",{children:(0,f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n((0,d.BH)(g,s)),x({title:"",message:"",from:""})},children:[(0,f.jsx)(w.Z,{label:"TITLE",value:h,type:"text",name:"title",required:!0,className:y.VD.test(h)?"entered":"invalid",error:y.VD.test(h)||0===h.length?null:"Name must contain at least 5 characters",onChange:function(e){return M(e.target)}}),(0,f.jsx)(C.Z,{label:"Message",id:"message",name:"message",value:j,error:j.length<=15&&0!==(null===j||void 0===j?void 0:j.length)?"Description must contain at least 16 characters":null,onChange:function(e){return M(e.target)}}),(0,f.jsx)(w.Z,{label:"From",value:Z,type:"text",name:"from",required:!0,className:y.VD.test(Z)?"entered":"invalid",error:y.VD.test(Z)||0===(null===Z||void 0===Z?void 0:Z.length)?null:"Please choose a number between 1 and 100",onChange:function(e){return M(e.target)}}),(0,f.jsx)(v.Z,{type:"submit",text:!y.VD.test(Z)||j.length<=15?"Disabled":"submit",variant:"primary",disabled:!y.VD.test(Z)||j.length<=15})]})})]})]})},D=function(){var e=(0,a.I0)(),s=(0,i.s0)(),n=(0,a.v9)((function(e){return e.userLogin})).userInfo,x=(0,a.v9)((function(e){return e.userAdminDetails})).userAdmin;(0,t.useEffect)((function(){var t=!1;return n||null!==x&&void 0!==x&&x.isAdmin?t||e((0,d.Z$)()):s("/login"),function(){return t=!0}}),[s,e,n,x]);var p=(0,a.v9)((function(e){return e.adminGetPrivateMessages})),N=p.loading,b=p.success,w=p.error,y=p.messages,C=(0,t.useState)(""),D=(0,r.Z)(C,2),k=D[0],I=D[1],A=null===y||void 0===y?void 0:y.filter((function(e){return e.to.toLowerCase().includes(k.toLowerCase())})),F=function(s,n,t){e((0,d.A5)(s,n,t))},_=(0,a.v9)((function(e){return e.adminIsCompletePrivateMessage})),P=_.loading,T=_.error,B=_.success;return(0,f.jsxs)(f.Fragment,{children:[w?(0,f.jsx)(u.Z,{error:w}):null,T?(0,f.jsx)(u.Z,{error:T}):null,N||P?(0,f.jsx)(c.Z,{}):(0,f.jsx)(f.Fragment,{children:b||B&&A?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h2",{children:"Manage Private Messages"}),(0,f.jsxs)("div",{className:"admin-get-player__top-wrapper",children:[(0,f.jsx)(m.Z,{placeholder:"SEARCH NAME",value:k,onChange:function(e){I(e.target.value)},quantity:A.length,total:y.length}),(0,f.jsx)(v.Z,{type:"button",text:(0,f.jsx)(l.OL,{className:function(e){return e.isActive?"active":""},to:"/admin-profile",children:"Go Back"}),variant:"info",disabled:!1})]}),(0,f.jsx)("div",{className:"wrapper",children:null===A||void 0===A?void 0:A.map((function(e){return(0,f.jsx)("div",{className:"inner-content-wrapper",children:(0,f.jsxs)("fieldset",{className:"fieldSet",children:[(0,f.jsx)("legend",{children:(0,f.jsx)(g.Z,{value:"TO: ".concat(null===e||void 0===e?void 0:e.to),keyword:k})}),(0,f.jsxs)("div",{className:"message-wrapper",children:[e.isComplete?(0,f.jsx)("div",{onClick:function(){return F(!1,null===e||void 0===e?void 0:e.user,null===e||void 0===e?void 0:e._id)},children:(0,f.jsxs)("div",{className:"is-complete-wrapper",children:[(0,f.jsx)("p",{className:"small-text danger",children:"Un-Mark as Complete"}),(0,f.jsx)(o.bGJ,{className:"ra-thumbs-down"})]})}):(0,f.jsx)("div",{onClick:function(){return F(!0,null===e||void 0===e?void 0:e.user,null===e||void 0===e?void 0:e._id)},children:(0,f.jsxs)("div",{className:"is-complete-wrapper",children:[(0,f.jsx)("p",{className:"small-text warning",children:"Mark as Complete"}),(0,f.jsx)(o.spm,{className:"ra-thumbs-up"})]})}),(0,f.jsxs)("h3",{children:[null===e||void 0===e?void 0:e.title," "]}),(0,f.jsx)("p",{children:null===e||void 0===e?void 0:e.message}),(0,f.jsx)("p",{children:null===e||void 0===e?void 0:e.from}),(0,f.jsxs)("sup",{children:["[posted ",h()(null===e||void 0===e?void 0:e.createdAt).fromNow(),"]"]})]}),(0,f.jsx)(j.Z,{className:"create-btn",openButtonTitle:"EDIT",closeButtonTitle:"Close",variant:"warning",props:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(M,{messageId:null===e||void 0===e?void 0:e._id})})}),(0,f.jsx)(Z,{messageId:null===e||void 0===e?void 0:e._id}),null===e||void 0===e?void 0:e.privateMessageReply.map((function(e){return(0,f.jsxs)("div",{className:"reply-wrapper",children:[(0,f.jsx)("h4",{children:"Reply:"}),(0,f.jsxs)("h3",{children:[null===e||void 0===e?void 0:e.title," "]}),(0,f.jsx)("p",{children:null===e||void 0===e?void 0:e.to}),(0,f.jsx)("p",{children:null===e||void 0===e?void 0:e.message}),(0,f.jsx)("p",{children:null===e||void 0===e?void 0:e.from}),(0,f.jsxs)("sup",{children:["[posted ",h()(null===e||void 0===e?void 0:e.createdAt).fromNow(),"]"]})]},null===e||void 0===e?void 0:e._id)}))]})},null===e||void 0===e?void 0:e._id)}))})]}):null})]})},k=function(){return(0,f.jsx)(D,{})}}}]);
//# sourceMappingURL=377.8dcd9324.chunk.js.map